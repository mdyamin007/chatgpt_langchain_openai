title: SFCE [22912] [pvt] eStatement Delivery Preference Update
description: SFCE eStatement Delivery Preference Update

*IS Assessment:*

The following applications will need to be modified with this logic:

SFCEMS5 (Statement) Tohid

SFCEMC3 (HELOC) Le

SFCEMC4 (Billing Statement) Nar

SFCEMV4 (Visa Business) Rony

SFCEMV5 (Visa Classic) Rony

SFCEMV6 (Visa Platinum) Rony

SFCEDLA (Daily Notices) Nar







1.) Update dfa program to no longer use paperless file from ISD.

2.) Update dfa program to use Delivery Preference bases on the XML field eStatementOption provided by statement data generated by KeyStone


 * eStateementOption have the following options
 ** [M Mail statement only (Print) (Status = P in ISD enrollment file)|https://owa.infoimageinc.com/owa/redir.aspx?C=V5PdpqwhgggBlqWzIu1xAZnyPmSmhYcDCDNIoM39Nq3nJVOayYHZCA..&URL=https%3a%2f%2fowa.infoimageinc.com%2fowa%2fredir.aspx%3fSURL%3dK_YcG0zvPl6Rk0scy08-ItTvoHgEkBDUuJTfV8lN9n4hJpBeN4HUCGgAdAB0AHAAOgAvAC8AdwB3AHcALgBpAG4AZgBvAGkAbQBhAGcAZQBpAG4AYwAuAGMAbwBtAC8A%26URL%3dhttp%253a%252f%252fwww.infoimageinc.com%252f]
 ** [E E-statement only  (eSup2) (Status = E in ISD enrollment file)|https://owa.infoimageinc.com/owa/redir.aspx?C=V5PdpqwhgggBlqWzIu1xAZnyPmSmhYcDCDNIoM39Nq3nJVOayYHZCA..&URL=https%3a%2f%2fowa.infoimageinc.com%2fowa%2fredir.aspx%3fSURL%3dK_YcG0zvPl6Rk0scy08-ItTvoHgEkBDUuJTfV8lN9n4hJpBeN4HUCGgAdAB0AHAAOgAvAC8AdwB3AHcALgBpAG4AZgBvAGkAbQBhAGcAZQBpAG4AYwAuAGMAbwBtAC8A%26URL%3dhttp%253a%252f%252fwww.infoimageinc.com%252f]
 ** [B E-statement and mail statement (Print) (Status = W in ISD enrollment file)|https://owa.infoimageinc.com/owa/redir.aspx?C=V5PdpqwhgggBlqWzIu1xAZnyPmSmhYcDCDNIoM39Nq3nJVOayYHZCA..&URL=https%3a%2f%2fowa.infoimageinc.com%2fowa%2fredir.aspx%3fSURL%3dK_YcG0zvPl6Rk0scy08-ItTvoHgEkBDUuJTfV8lN9n4hJpBeN4HUCGgAdAB0AHAAOgAvAC8AdwB3AHcALgBpAG4AZgBvAGkAbQBhAGcAZQBpAG4AYwAuAGMAbwBtAC8A%26URL%3dhttp%253a%252f%252fwww.infoimageinc.com%252f]
 ** [The default is M. Indicates whether or not the account is enrolled for e-statements.|https://owa.infoimageinc.com/owa/redir.aspx?C=V5PdpqwhgggBlqWzIu1xAZnyPmSmhYcDCDNIoM39Nq3nJVOayYHZCA..&URL=https%3a%2f%2fowa.infoimageinc.com%2fowa%2fredir.aspx%3fSURL%3dK_YcG0zvPl6Rk0scy08-ItTvoHgEkBDUuJTfV8lN9n4hJpBeN4HUCGgAdAB0AHAAOgAvAC8AdwB3AHcALgBpAG4AZgBvAGkAbQBhAGcAZQBpAG4AYwAuAGMAbwBtAC8A%26URL%3dhttp%253a%252f%252fwww.infoimageinc.com%252f]  (Status = P in ISD enrollment File)

3.) Remove cid&jid from /home/keep/paperless/paperless.lis file.

4.) Create a new ISD enrollment file and trigger ISD PUI server. This needs to be triggered after send trigger PUI statement processing. Order of the call matters! The following are the specifications:



Filenaming convention:

sfce(jid)_enrollment_MMDDYYYY.txt

e.g.:

sfcems5_enrollment_02252022.txt

Please file in $d_dir/isd_input/I3/process-files/sfce/





File Contents Specifications:

The fields required in this enrollment files are as listed below. Please include the following line as a heading in this file. For CIF Number field, please use the Account Number Value. The Status value specs are list above in step 2.



CIF Number|Account Number|Account Name|Email|Status



e.g.:

CIF Number|Account Number|Account Name|Email|Status

22222|22222|John Doe|jd@yahoo.com|E

54321|54321|Bib Miller|bmiller@gmail.com|W

99999|99999|Rachael Paxton|paxtonr@hotmail.com|P



Full ISD documentation is located in:

[https://confluence.infoimageinc.com/x/YxZ6B]





Trigger Logic:

I believe we can reuse /home/master/I3.socket.pl

Make sure enviroment variable e_paperless is set to y and paperlessFile environment variable is set to the enrollment file name

e.g.:

e_paperless=y

paperlessFile=sfcems5_enrollment_02252022.txt



*5*. If <eStatementOption>and/or <eStatementEmailAddress> tag is missing, do create Print, do create eStatement Archival, and do create PDF archival.

Create a report providing a list of member numbers with<eStatementOption>== "B" andsend email to "fmartinez@sanfranciscofcu.com,[stephen.yee@infoimageinc.com,|mailto:stephen.yee@infoimageinc.com]tech4@sanfranciscofcu.com".

The report contain will contain a list of account numbers and should be placed in secure4 ftp server.

Here's the body of the email and the report file naming convention listed below.

*SUBJECT*: SFCE ${Application Name}:Corelation eStatementOptiontag == B

*BODY*:

Dear Valued Customer,

During processing we detected <eStatementOption> == B (E-statement and mail statement) into XML file. A printed statement will go out to your members. Please go to the FTP client_pickup folder to download the following report containing a list of account numberswith this XML tagto research:

sfce${jid}_B_xml_corelation.txt



Thank You,



Data Center

InfoIMAGE Inc.

650.473.6388

[Data_Center@infoimageinc.com|mailto:Data_Center@infoimageinc.com]


author: william.kong
comment: [~lemoy28]: Scope as changed a bit to whenever processing program does not see <eStatementOption> and/or <eStatementEmailAddress> tag. Report needs to be created and email needs to be sent. Do not create paper (i.e. NON-PRINT), do not create eStatemenet (i.e. non-estmt) but still create a statement for the PDF archival. See #5 in description of work for the specs and email language. I updated due date to be 4/8/2022. Please confirm if this ok.


author: william.kong
comment: Updated specs to specify secure4 (i.e. infoftps4/sfce/client_pickup folder) & fixed report file naming convention to no include pgp since there is no pgp encryption. Just use plain text.


author: william.kong
comment: [~lemoy28]: Description of work #5 changed again. Please review updated specs.


author: william.kong
comment: [~stephen.yee@infoimageinc.com]: We are behind schedule with this project. Le is tied up with HFCU and we need to switch developers. [~Peter.Dang]is working with [~rony]to see if his team can help take over this project. Most likely this will need to be pushed from May 6 to June 6. I won't know until [~rony]returns on Thursday next week to confirm his resources.


author: william.kong
comment: [~rony]: When you return tonight, please confirm if you can assign someone to take over per our discussion last Thursday.


author: rony
comment: Hi [~William.Kong]

Assigned this to [~tohidulI]


author: tohiduli
comment: Hi [~stephen.yee@infoimageinc.com]

sample correlation report: /z/infoftps4/switchthink/sfce/client_pickup/sfcemc4_missing_xml_correlation.txt

I sent you a sample notification email.

enrollment file:/z/isd_input_dev/I3/process-files/sfce/mc3_enrollment_06112021.txt




author: tohiduli
comment: enrollment sample in pilot:/t/isd_input_dev/I3/process-files/sfce/mc3_enrollment_06112021.txt


author: stephen.yee@infoimageinc.com
comment: Looks good [~tohidulI]. Please prepare for QA and assign to QA.


author: stephen.yee@infoimageinc.com
comment: [~tohidulI]- Please advise. We need to roll this out ASAP.


author: tohiduli
comment: parallel ID: 20220505085249

project(SFCEMC31.zip) exported to QA folder

isd index: /z/isd_input_dev/I3/process-files/sfce/mc3_20210610_1_20220506_0526_sfce.txt

do not need print sample as there is no cosmetic changes.


author: igor.khosid
comment:    Parallel ID: 20220505085249
   Currently in parallel: Yes
   User: tohidulI
   Description: IS-816 enrollment update
   Date Submitted: 2022-05-05 08:53:02
   Date Last Updated: 2022-05-11 01:14:13
   Files:
      1) SFCEMC31.prj
      2) SFCEMC31.dfa
      3) sfcemc3_template.control
      4) sfcemc3_process.sh
      5) sfcemc3.procs


author: igor.khosid
comment: [~Andrey.Kutsenko] - Pilot already approved, please process index file, check the dfa updates and confirm


author: JIRAUSER11104
comment: [~tohidulI]
Errors while processing index file 'mc3_20210610_1_20220506_0526_sfce.txt' (see Ref#193462 on pui-stage)


author: rony
comment: Hi [~Andrey.Kutsenko]

Sorry we don't have access to pui stage. Would you please provide screenshot here.



Thanks




author: igor.khosid
comment: [~rony] - please see below
 !PUI DataException.png|thumbnail! 

[~Andrey.Kutsenko] - FYI


author: igor.khosid
comment: [~rony] - Any updates?

[~Andrey.Kutsenko] - FYI


author: tohiduli
comment: Hi [~Igor.Khosid]

can you checkISD-6401 ticket? ISD was able to post without error.




author: igor.khosid
comment: Thank you, [~tohidulI]
Do we know what the reason was for the failure?

[~Andrey.Kutsenko] - please proceed


author: JIRAUSER11104
comment: QA - Completed.

[~tohidulI]please attach IS checklist.


author: tohiduli
comment: [^IS-816_IS_CHECKLIST_05192022.docx]

attached is checklist


author: tohiduli
comment: [~TunA]

attached transfer form

[^IS_PROGRAM_TRANSFER_FORM_IS_816.doc]




author: tuna
comment: [~tohidulI],

Following codes have been released.

Thanks,

Tun



20220518112953 05/18/2022 tohidulI IS-816 SFCE [22912] [pvt] eStatement Delivery Preference Update

[main@rhs ~]$ ll /d/is/cvs/xfer/tohidulI/
total 432
-rwxrwxrwx 1 tohidulI DSI 58267 May 18 11:25 SFCEMC31.dfa
-rwxrwxrwx 1 tohidulI DSI 703 May 18 11:25 SFCEMC31.prj
-rwxrwxrwx 1 tohidulI DSI 14394 May 18 11:25 sfcemc3_process.sh
-rwxrwxrwx 1 tohidulI DSI 2854 May 18 11:25 sfcemc3.procs
-rwxrwxrwx 1 tohidulI DSI 4757 May 18 11:25 sfcemc3_template.control


