title: SFCE [22912] [pvt] eStatement Delivery Preference Update
description: SFCE eStatement Delivery Preference Update

*IS Assessment:*

The following applications will need to be modified with this logic:

SFCEMS5 (Statement) Tohid

SFCEMC3 (HELOC) Le

SFCEMC4 (Billing Statement) Nar

SFCEMV4 (Visa Business) Rony

SFCEMV5 (Visa Classic) Rony

SFCEMV6 (Visa Platinum) Rony

SFCEDLA (Daily Notices) Nar







1.) Update dfa program to no longer use paperless file from ISD.

2.) Update dfa program to use Delivery Preference bases on the XML field eStatementOption provided by statement data generated by KeyStone


 * eStateementOption have the following options
 ** [M Mail statement only (Print) (Status = P in ISD enrollment file)|https://owa.infoimageinc.com/owa/redir.aspx?C=V5PdpqwhgggBlqWzIu1xAZnyPmSmhYcDCDNIoM39Nq3nJVOayYHZCA..&URL=https%3a%2f%2fowa.infoimageinc.com%2fowa%2fredir.aspx%3fSURL%3dK_YcG0zvPl6Rk0scy08-ItTvoHgEkBDUuJTfV8lN9n4hJpBeN4HUCGgAdAB0AHAAOgAvAC8AdwB3AHcALgBpAG4AZgBvAGkAbQBhAGcAZQBpAG4AYwAuAGMAbwBtAC8A%26URL%3dhttp%253a%252f%252fwww.infoimageinc.com%252f]
 ** [E E-statement only  (eSup2) (Status = E in ISD enrollment file)|https://owa.infoimageinc.com/owa/redir.aspx?C=V5PdpqwhgggBlqWzIu1xAZnyPmSmhYcDCDNIoM39Nq3nJVOayYHZCA..&URL=https%3a%2f%2fowa.infoimageinc.com%2fowa%2fredir.aspx%3fSURL%3dK_YcG0zvPl6Rk0scy08-ItTvoHgEkBDUuJTfV8lN9n4hJpBeN4HUCGgAdAB0AHAAOgAvAC8AdwB3AHcALgBpAG4AZgBvAGkAbQBhAGcAZQBpAG4AYwAuAGMAbwBtAC8A%26URL%3dhttp%253a%252f%252fwww.infoimageinc.com%252f]
 ** [B E-statement and mail statement (Print) (Status = W in ISD enrollment file)|https://owa.infoimageinc.com/owa/redir.aspx?C=V5PdpqwhgggBlqWzIu1xAZnyPmSmhYcDCDNIoM39Nq3nJVOayYHZCA..&URL=https%3a%2f%2fowa.infoimageinc.com%2fowa%2fredir.aspx%3fSURL%3dK_YcG0zvPl6Rk0scy08-ItTvoHgEkBDUuJTfV8lN9n4hJpBeN4HUCGgAdAB0AHAAOgAvAC8AdwB3AHcALgBpAG4AZgBvAGkAbQBhAGcAZQBpAG4AYwAuAGMAbwBtAC8A%26URL%3dhttp%253a%252f%252fwww.infoimageinc.com%252f]
 ** [The default is M. Indicates whether or not the account is enrolled for e-statements.|https://owa.infoimageinc.com/owa/redir.aspx?C=V5PdpqwhgggBlqWzIu1xAZnyPmSmhYcDCDNIoM39Nq3nJVOayYHZCA..&URL=https%3a%2f%2fowa.infoimageinc.com%2fowa%2fredir.aspx%3fSURL%3dK_YcG0zvPl6Rk0scy08-ItTvoHgEkBDUuJTfV8lN9n4hJpBeN4HUCGgAdAB0AHAAOgAvAC8AdwB3AHcALgBpAG4AZgBvAGkAbQBhAGcAZQBpAG4AYwAuAGMAbwBtAC8A%26URL%3dhttp%253a%252f%252fwww.infoimageinc.com%252f]  (Status = P in ISD enrollment File)

3.) Remove cid&jid from /home/keep/paperless/paperless.lis file.

4.) Create a new ISD enrollment file and trigger ISD PUI server. This needs to be triggered after send trigger PUI statement processing. Order of the call matters! The following are the specifications:



Filenaming convention:

sfce(jid)_enrollment_MMDDYYYY.txt

e.g.:

sfcems5_enrollment_02252022.txt

Please file in $d_dir/isd_input/I3/process-files/sfce/





File Contents Specifications:

The fields required in this enrollment files are as listed below. Please include the following line as a heading in this file. For CIF Number field, please use the Account Number Value. The Status value specs are list above in step 2.



CIF Number|Account Number|Account Name|Email|Status



e.g.:

CIF Number|Account Number|Account Name|Email|Status

22222|22222|John Doe|jd@yahoo.com|E

54321|54321|Bib Miller|bmiller@gmail.com|W

99999|99999|Rachael Paxton|paxtonr@hotmail.com|P



Full ISD documentation is located in:

[https://confluence.infoimageinc.com/x/YxZ6B]





Trigger Logic:

I believe we can reuse /home/master/I3.socket.pl

Make sure enviroment variable e_paperless is set to y and paperlessFile environment variable is set to the enrollment file name

e.g.:

e_paperless=y

paperlessFile=sfcems5_enrollment_02252022.txt



*5*. If <eStatementOption>and/or <eStatementEmailAddress> tag is missing, do create Print, do create eStatement Archival, and do create PDF archival.

Create a report providing a list of member numbers with<eStatementOption>== "B" andsend email to "fmartinez@sanfranciscofcu.com,[stephen.yee@infoimageinc.com,|mailto:stephen.yee@infoimageinc.com]tech4@sanfranciscofcu.com".

The report contain will contain a list of account numbers and should be placed in secure4 ftp server.

Here's the body of the email and the report file naming convention listed below.

*SUBJECT*: SFCE ${Application Name}:Corelation eStatementOptiontag == B

*BODY*:

Dear Valued Customer,

During processing we detected <eStatementOption> == B (E-statement and mail statement) into XML file. A printed statement will go out to your members. Please go to the FTP client_pickup folder to download the following report containing a list of account numberswith this XML tagto research:

sfce${jid}_B_xml_corelation.txt



Thank You,



Data Center

InfoIMAGE Inc.

650.473.6388

[Data_Center@infoimageinc.com|mailto:Data_Center@infoimageinc.com]


author: william.kong
comment: [~jira_naru]:Scope as changed a bit to whenever processing program does not see <eStatementOption> and/or <eStatementEmailAddress> tag. Report needs to be created and email needs to be sent. Do not create paper (i.e. NON-PRINT), do not create eStatemenet (i.e. non-estmt) but still create a statement for the PDF archival. See #5 in description of work for the specs and email language. I updated due date to be 3/31/2022. Please confirm if this ok.


author: jira_naru
comment: Update DFA.


author: william.kong
comment: Updated specs to specify secure4 (i.e. infoftps4/sfce/client_pickup folder) & fixed report file naming convention to no include pgp since there is no pgp encryption. Just use plain text.


author: jira_naru
comment: [~stephen.yee@infoimageinc.com] and [~William.Kong] :

Attached is the sample of the report for the missing<eStatementOption> and/or <eStatementEmailAddress> tag.

[^sfcemc4_missing_xml_correlation.txt]

Please advise SFCE that the sample was generated from the latest production file,sfce_022822_billing.zip.pgp. Based on the new suppression logic, specifically for suppressing the statement if missing either of the two tags, there are no print file. Please confirm if this is correct. I am also attaching the DPVS from the test run.

[^sfcemc4128.print]




author: stephen.yee@infoimageinc.com
comment: Thanks [~jira_naru]. Sample sent to the CU.


author: william.kong
comment: [~stephen.yee@infoimageinc.com]: Can we get approvals by 3/23/2022 so that we can prepare to live by EOM?


author: william.kong
comment: [~jira_naru]:Description of work #5 changed again. Please review updated specs; Let's stick with this 4/29 live date timeline.


author: william.kong
comment: [~stephen.yee@infoimageinc.com]: Paperless logic implemented. Cannot provide samples to generate listing for the report because data doe not meet the condition. Can you review with [~jira_naru]and ask client for data file with the conditions needed to generate this report. Unfortunately, 4/29 date will be missed.


author: stephen.yee@infoimageinc.com
comment: [~jira_naru]- What criteria does the data not meet? We were able to create a sample report for the missing<eStatementOption> and/or <eStatementEmailAddress> tag. It was from the latest production file,sfce_022822_billing.zip.pgp.


author: jira_naru
comment: [~stephen.yee@infoimageinc.com]:

The report is no longer based on missing<eStatementOption> and/or <eStatementEmailAddress> tag.

The report now is based on:

<eStatementOption>== "B"

See Description, item 5.

The current production file do not have any accounts where<eStatementOption>== "B". Therefore, I cannot create sample report.


author: william.kong
comment: [~stephen.yee@infoimageinc.com]: Any updates and ETA on getting the data file with this scenario so that we can generate the reporting for approval?


author: stephen.yee@infoimageinc.com
comment: [~jira_naru]-

Please find attached data file. There 2 accounts with tag 
<eStatementOption option="B">E-statement and mail 
statement</eStatementOption>

Let me know if you have any questions.

[^20220411_015307_000.Statement_Production_Evergreen_HELOC050522.xml]


author: jira_naru
comment: [~stephen.yee@infoimageinc.com]:

I processed the provided test file in parallel and attached is the DPVS along with the report for the accounts with tag<eStatementOption option="B">E-statement and mail
statement</eStatementOption>.

[^sfcemc4_missing_xml_correlation.txt]

[^sfcemc4105.print]


author: stephen.yee@infoimageinc.com
comment: Looks good [~jira_naru]. Are you ready for QA? Please confirm and I'll update this story. Thx.


author: jira_naru
comment: QA:

Project exported to/d/iss/qa/SFCE/SFCEMC41.zip

Parallel id:20220310151400




author: igor.khosid
comment:    Parallel ID: 20220310151400
   Currently in parallel: Yes
   User: nar
   Description: IS821_MC4_paperless_logic
   Date Submitted: 2022-03-10 15:14:06
   Date Last Updated: 2022-05-05 10:24:06
   Files:
      1) SFCEMC41.dfa
      2) sfcemc4_process.sh
      3) sfcemc4.control


author: william.kong
comment: [~stephen.yee@infoimageinc.com]: I'm going to update the Due Date for this project to be on 5/18/2022 so I'm changing due date from 5/13 to 5/18. I'm not sure if parallel will finish before [~jira_naru]takes time off. Since this job cycles on the 1st of the month, i think it would be ok to release earlier on 5/18/2022 after Nar returns.


author: berezinez
comment: [~jira_naru] [~stephen.yee@infoimageinc.com]

QA is completed, the changes look good, please attach IS checklist if needed.


author: berezinez
comment: IS checklist attached.

[^IS_817_SFCE_IS_Checklist.pdf]


author: jira_naru
comment: Code release completed.
