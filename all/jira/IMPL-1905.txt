title: SFCE [22912] [pvt] eStatement Delivery Preference Update
description: SFCE eStatement Delivery Preference Update

*IS Assessment:*

The following applications will need to be modified with this logic:

SFCEMS5 (Statement) Tohid

SFCEMC3 (HELOC) Le

SFCEMC4 (Billing Statement) Nar

SFCEMV4 (Visa Business) Rony

SFCEMV5 (Visa Classic) Rony

SFCEMV6 (Visa Platinum) Rony

SFCEDLA (Daily Notices) Nar







1.) Update dfa program to no longer use paperless file from ISD.

2.) Update dfa program to use Delivery Preference bases on the XML field eStatementOption provided by statement data generated by KeyStone


 * eStateementOption have the following options
 ** [M Mail statement only (Print) (Status = P in ISD enrollment file)|https://owa.infoimageinc.com/owa/redir.aspx?C=V5PdpqwhgggBlqWzIu1xAZnyPmSmhYcDCDNIoM39Nq3nJVOayYHZCA..&URL=https%3a%2f%2fowa.infoimageinc.com%2fowa%2fredir.aspx%3fSURL%3dK_YcG0zvPl6Rk0scy08-ItTvoHgEkBDUuJTfV8lN9n4hJpBeN4HUCGgAdAB0AHAAOgAvAC8AdwB3AHcALgBpAG4AZgBvAGkAbQBhAGcAZQBpAG4AYwAuAGMAbwBtAC8A%26URL%3dhttp%253a%252f%252fwww.infoimageinc.com%252f]
 ** [E E-statement only  (eSup2) (Status = E in ISD enrollment file)|https://owa.infoimageinc.com/owa/redir.aspx?C=V5PdpqwhgggBlqWzIu1xAZnyPmSmhYcDCDNIoM39Nq3nJVOayYHZCA..&URL=https%3a%2f%2fowa.infoimageinc.com%2fowa%2fredir.aspx%3fSURL%3dK_YcG0zvPl6Rk0scy08-ItTvoHgEkBDUuJTfV8lN9n4hJpBeN4HUCGgAdAB0AHAAOgAvAC8AdwB3AHcALgBpAG4AZgBvAGkAbQBhAGcAZQBpAG4AYwAuAGMAbwBtAC8A%26URL%3dhttp%253a%252f%252fwww.infoimageinc.com%252f]
 ** [B E-statement and mail statement (Print) (Status = W in ISD enrollment file)|https://owa.infoimageinc.com/owa/redir.aspx?C=V5PdpqwhgggBlqWzIu1xAZnyPmSmhYcDCDNIoM39Nq3nJVOayYHZCA..&URL=https%3a%2f%2fowa.infoimageinc.com%2fowa%2fredir.aspx%3fSURL%3dK_YcG0zvPl6Rk0scy08-ItTvoHgEkBDUuJTfV8lN9n4hJpBeN4HUCGgAdAB0AHAAOgAvAC8AdwB3AHcALgBpAG4AZgBvAGkAbQBhAGcAZQBpAG4AYwAuAGMAbwBtAC8A%26URL%3dhttp%253a%252f%252fwww.infoimageinc.com%252f]
 ** [The default is M. Indicates whether or not the account is enrolled for e-statements.|https://owa.infoimageinc.com/owa/redir.aspx?C=V5PdpqwhgggBlqWzIu1xAZnyPmSmhYcDCDNIoM39Nq3nJVOayYHZCA..&URL=https%3a%2f%2fowa.infoimageinc.com%2fowa%2fredir.aspx%3fSURL%3dK_YcG0zvPl6Rk0scy08-ItTvoHgEkBDUuJTfV8lN9n4hJpBeN4HUCGgAdAB0AHAAOgAvAC8AdwB3AHcALgBpAG4AZgBvAGkAbQBhAGcAZQBpAG4AYwAuAGMAbwBtAC8A%26URL%3dhttp%253a%252f%252fwww.infoimageinc.com%252f]  (Status = P in ISD enrollment File)

3.) Remove cid&jid from /home/keep/paperless/paperless.lis file.

4.) Create a new ISD enrollment file and trigger ISD PUI server. This needs to be triggered after send trigger PUI statement processing. Order of the call matters! The following are the specifications:



Filenaming convention:

sfce(jid)_enrollment_MMDDYYYY.txt

e.g.:

sfcems5_enrollment_02252022.txt

Please file in $d_dir/isd_input/I3/process-files/sfce/





File Contents Specifications:

The fields required in this enrollment files are as listed below. Please include the following line as a heading in this file. For CIF Number field, please use the Account Number Value. The Status value specs are list above in step 2.



CIF Number|Account Number|Account Name|Email|Status



e.g.:

CIF Number|Account Number|Account Name|Email|Status

22222|22222|John Doe|jd@yahoo.com|E

54321|54321|Bib Miller|bmiller@gmail.com|W

99999|99999|Rachael Paxton|paxtonr@hotmail.com|P



Full ISD documentation is located in:

[https://confluence.infoimageinc.com/x/YxZ6B]





Trigger Logic:

I believe we can reuse /home/master/I3.socket.pl

Make sure enviroment variable e_paperless is set to y and paperlessFile environment variable is set to the enrollment file name

e.g.:

e_paperless=y

paperlessFile=sfcems5_enrollment_02252022.txt



*5*. If <eStatementOption>and/or <eStatementEmailAddress> tag is missing, do create Print, do create eStatement Archival, and do create PDF archival.

Create a report providing a list of member numbers with<eStatementOption>== "B" andsend email to "fmartinez@sanfranciscofcu.com,[stephen.yee@infoimageinc.com,|mailto:stephen.yee@infoimageinc.com]tech4@sanfranciscofcu.com".

The report contain will contain a list of account numbers and should be placed in secure4 ftp server.

Here's the body of the email and the report file naming convention listed below.

*SUBJECT*: SFCE ${Application Name}:Corelation eStatementOptiontag == B

*BODY*:

Dear Valued Customer,

During processing we detected <eStatementOption> == B (E-statement and mail statement) into XML file. A printed statement will go out to your members. Please go to the FTP client_pickup folder to download the following report containing a list of account numberswith this XML tagto research:

sfce${jid}_B_xml_corelation.txt



Thank You,



Data Center

InfoIMAGE Inc.

650.473.6388

[Data_Center@infoimageinc.com|mailto:Data_Center@infoimageinc.com]


author: lemoy28
comment: [~stephen.yee@infoimageinc.com]

[~William.Kong]

Steve,

Some accounts do not have <eStatementOption> tags in the xml.

Please advise if an account will have both print and e-statement if the <eStatementOption> tag is not available.


author: stephen.yee@infoimageinc.com
comment: Inquiry sent to the CU.


author: stephen.yee@infoimageinc.com
comment: [~lemoy28]- please provide some examples you're seeing the data file. SFCE needs to show Corelation.


author: lemoy28
comment: [~stephen.yee@infoimageinc.com]

Attached are examples of two accounts:

[^sfce_heloc_account_eStatementOption_and_eStatementEmailAddress.xml]

[^sfce_heloc_account_without_eStatementOption_and_eStatementEmailAddress.xml]

The first account have {color:#FF0000}+eStatementOption+{color} and{color:#FF0000}+eStatementEmailAddress+{color} tags.

The second account does not have either one.




author: stephen.yee@infoimageinc.com
comment: CU informed.


author: stephen.yee@infoimageinc.com
comment: [~lemoy28]- what data file did you extract this from?


author: lemoy28
comment: [~stephen.yee@infoimageinc.com]

The sample accounts were extracted from latest production cycle

(sfce_021122_heloc_1.xml.pgp )


author: lemoy28
comment: [~stephen.yee@infoimageinc.com]

Any update(s)?


author: william.kong
comment: [~stephen.yee@infoimageinc.com]: Please advise status on Le's comments above. Based on where we are at, I don't believe we can make it for 2/28/2022 live date. Can we advise client to wait for next month since we are pending answers to the items identified by Le.


author: william.kong
comment: [~stephen.yee@infoimageinc.com]: Please advise status on the question above and also did you alert the client that we will not make it for 2/28/2022 because of this pending question? We also need to advise ISD as well that this project is delayed. We DON'T want ISD to release their code until we are done programming.


author: stephen.yee@infoimageinc.com
comment: I extended the LIVE date to the 2nd week of March. No word yet from the client. I will follow up.


author: stephen.yee@infoimageinc.com
comment: [~lemoy28] [~William.Kong]- CU is asking if we can skip over and do NOT assign these members to either Paper or eStatement for now. If we do, we'll need to send an email to the individuals below with the filename where this error occurred. This will be temporary until Corelation can provide a fix.

[fmartinez@sanfranciscofcu.com|mailto:fmartinez@sanfranciscofcu.com]

[stephen.yee@infoimageinc.com|mailto:stephen.yee@infoimageinc.com]

Please let me know and advise on new live date.



Thanks.


author: william.kong
comment: [~stephen.yee@infoimageinc.com]: I just want to make sure we are 100% clear. If tag is missing, do NOT create a print document and do NOT create an eStatement archival; What about PDF archival logic? I'm assuming don't create PDF archival.



If that is the case, please update the description of work to:



If<eStatementOption> is missing, do not create Print (NONPRINT), do NOT crreate eStatement Archival (non-estmt), and do NOT create PDF archival.

Create a report providing a list of member number missing <eStatementOption> tag and send email to "

[fmartinez@sanfranciscofcu.com|mailto:fmartinez@sanfranciscofcu.com]

[stephen.yee@infoimageinc.com|mailto:stephen.yee@infoimageinc.com]"

to download the secure report to research.








author: stephen.yee@infoimageinc.com
comment: Let me confirm with SFCE.


author: stephen.yee@infoimageinc.com
comment: [~William.Kong] [~lemoy28]- The CU would still like them in the PDF archival. Description of work has been updated. Please advise on new timeline.


author: stephen.yee@infoimageinc.com
comment: [~William.Kong] [~lemoy28]- CU signed off on the additional hours. Please advise on sample date.


author: william.kong
comment: [~stephen.yee@infoimageinc.com]: We misquoted the Daily Letter, please subtract the hours for Daily Letters (IS-820).

I'm in the process of confirming with the team to see if we can get all this completed by 3/31/2022 with the exception of HELOC. HELOC live date is targeted to be 4/8/2022 for Le. Le is a bit overloaded and he is hoping he can commit to 4/8/2022.


author: william.kong
comment: Updated specs to specify secure4 (i.e. infoftps4/sfce/client_pickup folder) & fixed report file naming convention to no include pgp since there is no pgp encryption. Just use plain text.


author: rony
comment: Hi [~William.Kong]

Should we include entries in enrolment file for those eStatementEmailAddress tags missing oreStatementOption is missing?


author: william.kong
comment: [~rony]: What is this enrollment file you are referring to and what is the purpose of this enrollment file?


author: stephen.yee@infoimageinc.com
comment: [~rony] [~William.Kong]- SFCE spoke with Corelation and they may want to change the logic that ifeStatementOption is missing, we will assign to Paper.

I'm confirming the logic with the CU now and will provide and update.


author: stephen.yee@infoimageinc.com
comment: [~rony] [~William.Kong]- If we update the logic to the below, will we still NOT create an eStatement Archival? No, right? Because they are on Paper we will need to create the eStatement archival so they can review if they ever switch to eStatements in the future. Please confirm the logic.


 _5. I*f <eStatementOption> is missing, do create Print*, do NOT create eStatement Archival (non-estmt), and DO create PDF archival. PDF archival only applies to Visa Business and Platinum._
 
 _Create a report providing a list of member number missing <eStatementOption> and/or <eStatementEmailAddress> tag and send email to "[fmartinez@sanfranciscofcu.com, stephen.yee@infoimageinc.com, tech4@sanfranciscofcu.com|mailto:fmartinez@sanfranciscofcu.com,%20stephen.yee@infoimageinc.com,%C2%A0%20tech4@sanfranciscofcu.com]"._
 
 _The report contain will contain a list of account numbers and should be placed in secure4 ftp server._
 
 _Here's the body of the email and the report file naming convention listed below._
 
 _SUBJECT: SFCE ${Application Name}: Missing Corelation eStatementOption and/or XML tag_
 
 _BODY:_
 
 _Dear Valued Customer,_
 
 _During processing we detected eStatementOption and/or eStatementEmailAddress XML tag was missing during processing. The print statement and eStatement will not be generated. However, the PDF will have a copy of this statements. Please go to the FTP client_pickup folder to download the following report containing a list of account numbers missing these XML tags to reseearch:_
 
 _sfce${jid}_missing_xml_correlation.txt_




author: william.kong
comment: [~stephen.yee@infoimageinc.com]: As the approved original business rule states:

*"If <eStatementOption> is missing, do not create Print (NONPRINT), do NOT create eStatement Archival (non-estmt), and{color:#172b4d} DO create PDF archival.{color} PDF archival only applies to Visa Business and Platinum."*



Looks like change in specs again to (see red font):

*"If <eStatementOption> is missing, {color:#de350b}do create{color} Print, do NOT create eStatement Archival (non-estmt), and DO create PDF archival. PDF archival only applies to Visa Business and Platinum."*

If so, we need to requote this project again as we+double-checked+ this specification before we started this project. We will also need to update the email content to reflect this new business rule.


author: stephen.yee@infoimageinc.com
comment: [~William.Kong]- Understood. But we will also need to create eStmt Archival since we will create a print file. Right?


author: william.kong
comment: [~jira_naru]/[~lemoy28]/[~rony]/[~tohidulI]/[~Azad]: I spoke with [~stephen.yee@infoimageinc.com], because of all the last minute spec change again, we will need this project to go live the following month 4/30/2022 and HELOC to mid May since it cycle mid month.

If SFCE is ok, I will update the specs above and email content to reflect ifeStatementOption and/or eStatementEmailAddress is missing.

Print Statement

Create eStatement Archival to Post

Create PDF archival








author: stephen.yee@infoimageinc.com
comment: [~William.Kong] - CU okay'd the April EOM LIVE date.


author: william.kong
comment: [~stephen.yee@infoimageinc.com]: Go it. Description and stories updated with a 4/29 live date with the exception of HELOC with a 5/6 live date



[~jira_naru]//[~rony]/[~tohidulI]/[~Azad]: FYI. Please review Spec 5 as the portion has been updated.

[~lemoy28]: You live date will be 5/6






author: stephen.yee@infoimageinc.com
comment: [~William.Kong]- One more update. Please see below. This is a modification of the email that will go out. CU would like to be informed of all members with a "B" eStatement Option. They do not need a report showing the members where the field is empty.



Create a report providing a list of member numbers with<eStatementOption>== "B" andsend email to "fmartinez@sanfranciscofcu.com,[stephen.yee@infoimageinc.com,|mailto:stephen.yee@infoimageinc.com]tech4@sanfranciscofcu.com".

The report contain will contain a list of account numbers and should be placed in secure4 ftp server.

Here's the body of the email and the report file naming convention listed below.

*SUBJECT*: SFCE ${Application Name}:Corelation eStatementOptiontag == B

*BODY*:

Dear Valued Customer,

During processing we detected <eStatementOption> == B (E-statement and mail statement) into XML file. A printed statement will go out to your members. Please go to the FTP client_pickup folder to download the following report containing a list of account numberswith this XML tagto research:

sfce${jid}_B_xml_corelation.txt



Thank You,



Data Center

InfoIMAGE Inc.

650.473.6388

[Data_Center@infoimageinc.com|mailto:Data_Center@infoimageinc.com]


author: william.kong
comment: [~stephen.yee@infoimageinc.com]: Please add 6 hours to this change requirement for another change in the business rules again. 1 hr per app. If they agree, please update all the description to. Please+triple+ check with them again to make sure they are 100% sure this is the finalized business rules as we do not want to continue change logic again and incur additional programming hours for the CU.



*5*. If <eStatementOption>and/or <eStatementEmailAddress> tag is missing, do create Print, do create eStatement Archival, and do create PDF archival. PDF archival only applies to Visa Business and Platinum.

Create a report providing a list of member numbers with<eStatementOption>== "B" andsend email to "fmartinez@sanfranciscofcu.com,[stephen.yee@infoimageinc.com,|mailto:stephen.yee@infoimageinc.com]tech4@sanfranciscofcu.com".

The report contain will contain a list of account numbers and should be placed in secure4 ftp server.

Here's the body of the email and the report file naming convention listed below.

*SUBJECT*: SFCE ${Application Name}:Corelation eStatementOptiontag == B

*BODY*:

Dear Valued Customer,

During processing we detected <eStatementOption> == B (E-statement and mail statement) into XML file. A printed statement will go out to your members. Please go to the FTP client_pickup folder to download the following report containing a list of account numberswith this XML tagto research:

sfce${jid}_B_xml_corelation.txt



Thank You,



Data Center

InfoIMAGE Inc.

650.473.6388

[Data_Center@infoimageinc.com|mailto:Data_Center@infoimageinc.com]




author: stephen.yee@infoimageinc.com
comment: Client approved of the estimate and the description[~William.Kong]. Please move forward.

[^SFCE eStmt Delivery Preference Update Estimate UPDATED 3-22 Signed.pdf]


author: william.kong
comment: [~stephen.yee@infoimageinc.com]: [~jira_naru] pointed out the high-lighted item that I missed. Can you clarify what client wants for the other applications related to PDF archival? Does this mean, for applications not associated to Visa Business and Platinum to not create PDF archivals, but still create Print and eStatements.



[IMPL-1905] SFCE eStatement Delivery Preference Update - Jira (infoimageinc.com)



If <eStatementOption>and/or <eStatementEmailAddress> tag is missing, do create Print, do create eStatement Archival, and do create PDF archival. {color:#de350b}*PDF archival only applies to Visa Business and Platinum.*{color}





In my opinion, I would suggest to keep this business rule to ALL apps associated to this project and not be only specific for Visa Business and Platinum. If client agrees, then lets remove the strike-through below:



If <eStatementOption>and/or <eStatementEmailAddress> tag is missing, do create Print, do create eStatement Archival, and do create PDF archival. -PDF archival only applies to Visa Business and Platinum.-




author: stephen.yee@infoimageinc.com
comment: [~William.Kong]- SFCE only reviews the PDF archival for Visa Business and Platinum. I put that verbiage in because I didn't want your team to do extra work. Whatever is easier for your team.

I've updated the verbiage.


author: william.kong
comment: [~stephen.yee@infoimageinc.com]: Please advise the client that we should remove that verbiage. I would suggest all the applications that currently have PDF archival services setup to have consistent business rules. Please if client agrees. If so, I will remove that line of verbiage.




author: stephen.yee@infoimageinc.com
comment: [~William.Kong]- Agreed. I've updated the verbiage.


author: stephen.yee@infoimageinc.com
comment: [~William.Kong]- Please see TS 28037. This is a new request from SFCE. I'm not sure if we should include it with these updates. Basically SFCE wants us to stop switching members to paper due to bounceback. I'll move forward as a separate update unless you tell me otherwise.
